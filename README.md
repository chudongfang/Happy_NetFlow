# Happy_NetFlow
使用遗传算法和网络流相关算法解决视频节点分配和视频流量分配问题。

## 问题描述


#### 网络结构模型：
    
    给定一个由若干网络节点（例如路由器、交换机）构成的网络结构无向图，每个节点至少与另外一个节点通过网络链路相连
    （网络链路特指两个网络节点之间直接相连的网络通路，中间没有其他网络节点，相当于无向图中的一条边），一个节点可
    以将收到的数据通过网络链路传输给相连的另一个节点，节点本身的转发能力无上限。每条链路的网络总带宽不同（例如某
    条链路的总带宽为10Gbps）。而每条链路承载的视频传输需要按照占用带宽的多少按每10秒收取对应网络租用费，每条链
    路的单位租用费均不同（例如某条链路的租用费为5千元/Gbps/10秒）。某条链路上被占用的带宽总和不得超过该链路的总
    带宽。

#### 消费节点：
    
    给定的网络结构中有部分网络节点直接连接到小区住户的网络，每个小区住户网络在这个给定的网络结构图中呈现为一个消
    费节点，并存在视频带宽消耗需求。

#### 视频内容服务器：
    
    视频内容服务器存放视频内容（如：电影影片、电视剧等），视频内容服务器的视频数据流可以经由网络节点与链路构成的
    网络路径流向消费节点，一台视频内容服务器可以服务多个消费节点，而一个消费节点也可以同时从多台视频内容服务器获
    取视频流。购买一台视频内容服务器需要硬件成本，每台视频内容服务器的输出能力存在上限（例如200Gbps/台），并分
    为若干档次（如1，2，3三个档次），不同档次的输出能力上限与硬件成本均不同（例如档次1的服务器硬件成本为100千元
    /台）。此外对于某个网络节点，部署一台视频内容服务器需要支付额外的部署成本（例如某个网络节点的额外部署成本为
    30千元/台），不同网络节点的部署成本可能不同。因此部署一台视频内容服务器到某网络节点的成本为该服务器硬件成本
    与该节点部署成本之和。


## 解决方法 

#### 大体思路
    此问题的难点就是在选择服务器节点上面，如何选择服务器节点直接关系到了费用的多少

#### 路径输出问题解决过程

    我当时是直接把网络流的增广路输出出来，在前期样例输出时，其错误并不明显。到后来换了样例以后，错误就慢慢显现出来，
    老是出现流量超限的错误，后来看到队友发来的一篇文章，发现，其有可能有负的流量，就改为在网络残量上跑DFS来输出路径，
    最终的跑出了正确答案。

#### 遗传算法的优化过程

遗传算法我主要从参数、交叉函数、变异函数这三个方面入手来提升效率。

- 1、参数优化：

        在参数优化方面，主要是去进行不断的尝试。我是先在本地跑，然后不停的修改参数，然后不断测试数据，觉得这是一个很漫长
        充满期待的过程。经过不断修改参数，得到了一定的成效，其中最明显的是当时把种群个数由多个改成了一个，这样的话，其种群
        代数明显增加。其结果也变得越来越优。

- 2、交叉函数优化：

        我刚开始用的交叉函数是两个优秀个体交叉生成一个个体，来替代较差的个体。后来发现这样其较难生成交优数据。后来改用两个
        较优个体生成两个个体，并增加个体选择的随机性，这样其优化效果就很明显的，这个说明在遗传算法中，加大选择的随机性可以
        在一定程度上得到较优解。

- 3、变异函数

        变异函数我一共试过两种方法，一个是随机选择两个服务器，然后让其交换状态，另一个方法就是随机选择一个服务器，改变其状态。
        经过反复试验，第二种方法优于第一种方法，所以就采用了第二种。

        这整个期间基本上就是不断的在本地试，然后提交测试，一步一步优化算法。

##### 这只是本人的一些的优化点，希望有兴趣的可以一起交流，一起学习！











